<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8">
    <title>דאשבורד ראשי</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="/" class="nav-brand">
            <img src="./src/images/logo.png" alt="Logo">
          </a>
          <ul class="nav-menu without-auth">
            <li class="nav__item">
              <a href="./pages/login.html" class="nav__link">Login</a>
            </li>
            <li class="nav__item">
              <a href="./pages/regpage.html" class="nav__link">Register</a>
            </li>
            <li class="nav__item">
              <a href="./pages/help.html" class="nav__link">Need Help?</a>
            </li>
          </ul>
          <ul class="nav-menu with-auth">
            <li class="nav__item">
              <a href="./pages/profile.html" class="nav__link">Hi <span id="user-name"></span></a>
            </li>
            <li class="nav__item">
              <a href="./pages/help.html" class="nav__link">Need Help?</a>
            </li>
            <li class="nav__item">
              <span class="nav__link" id="logoutBtn">Logout</span>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container dashboard">
      <nav class="dashboard-nav">
        <button id="view-shifts" class="nav-button" onclick="window.location.href='./pages/view-shifts.html'">Shifts</button>
        <button id="add-shift" class="nav-button" onclick="window.location.href='./pages/addtable.html'">Add Shift</button>
        <button id="edit-profile" class="nav-button" onclick="window.location.href='./pages/profile.html'">Edit Profile</button>
      </nav>

      <section class="metrics">
        <div class="card">
          <div class="card-value" id="average-hourly-wage">0</div>
          <div class="card-label">Average Hourly Salary</div>
        </div>
        <div class="card">
          <div class="card-value" id="average-shift-wage">0</div>
          <div class="card-label">Average Shift Salary</div>
        </div>
        <div class="card">
          <div class="card-value" id="most-worked-branch">N/A</div>
          <div class="card-label">Branch with most shifts</div>
        </div>
        <div class="card">
          <div class="card-value" id="highest-paying-role">N/A</div>
          <div class="card-label">Role with highest salary</div>
        </div>
        <div class="card">
          <div class="card-value" id="shiftsLastMonth">0</div>
          <div class="card-label">Shifts this month</div>
        </div>
        <div class="card">
          <div class="card-value" id="consecutiveDays">0</div>
          <div class="card-label">Days strike</div>
        </div>
        <div id="lastUpdateTime">Last update: </div>
      </section>
    </main>
  </body>

  <script>
    const isAuthenticated = localStorage.getItem("userId");
    const redirect = () => {
      if (!isAuthenticated) window.location.href = "./pages/login.html";
    };
    redirect();
  </script>

  <script type="module" src="./src/js/app.js"></script>
  <script type="module" src="./src/js/dashboard.js"></script>
</html>
